function Texyla(t,e){if(this.options=jQuery.extend({},this.defaultOptions,e||{}),this.textarea=jQuery(t),this.textarea.data("texyla"))return!1;this.textarea.data("texyla",!0);var i=this.options.language;if(!this.languages[i])return this.error("Language '"+i+"' is not loaded."),!1;this.lng=this.languages[i],this.baseDir=this.options.baseDir||this.baseDir,this.options.iconPath=this.expand(this.options.iconPath),this.options.previewPath=this.expand(this.options.previewPath),this.texy=new Texy(this),this.wrap();for(var n=0;n<this.initPlugins.length;n++)this.initPlugins[n].apply(this)}function Selection(t){this.textarea=t}function Texy(t){this.textarea=t.textarea.get(0),this.texyla=t}jQuery.fn.extend({texyla:function(t){this.filter("textarea").each(function(){new Texyla(this,t)})}}),jQuery.extend({texyla:function(t){jQuery("textarea").texyla(t)}}),Texyla.prototype.expand=function(t,e){return t=t.replace("%texyla_base%",this.baseDir),e&&(t=t.replace("%var%",e)),t},Texyla.prototype.initPlugins=[],jQuery.texyla.setDefaults=function(t){jQuery.extend(Texyla.prototype.defaultOptions,t)},jQuery.texyla.initPlugin=function(t){Texyla.prototype.initPlugins.push(t)},jQuery.texyla.addButton=function(t,e){Texyla.prototype.buttons[t]=e},jQuery.texyla.extend=function(t){jQuery.extend(Texyla.prototype,t)},jQuery.texyla.addStrings=function(t,e){Texyla.prototype.languages[t]||(Texyla.prototype.languages[t]={}),jQuery.extend(Texyla.prototype.languages[t],e)},jQuery.texyla.setErrorHandler=function(t){Texyla.prototype.error=t},Texyla.prototype.submit=function(){function t(){void 0==e.submit.tagName?e.submit():e.submit.click()}var e=this.textarea.get(0).form;"function"==typeof e.onsubmit?e.onsubmit()!==!1&&t():t()},Texyla.prototype.error=function(t){alert("Error: "+t)},Texyla.prototype.baseDir=null,Texyla.prototype.languages={},Texyla.prototype.defaultOptions={width:null,padding:5,texyCfg:"",toolbar:["bold","italic",null,"ul","ol",null,"link",null,"emoticon","symbol","img","table",null,["web"]],bottomLeftToolbar:["edit","preview"],bottomRightEditToolbar:["syntax"],bottomRightPreviewToolbar:["submit"],buttonType:"span",tabs:!1,defaultView:"edit",iconWidth:16,iconHeight:16,baseDir:null,iconPath:"%texyla_base%/icons/%var%.png",previewPath:null,language:"cs"},Selection.prototype={lineFeedFormat:null,lineFeedKnown:!1,isIe:function(){return this.textarea.selectionStart||0===this.textarea.selectionStart?!1:document.selection?!0:null},tag:function(t,e){this.update(),this.changeSelection(t+this.text()+e),this.isCursor()?this.select(this.start+t.length,0):this.select(this.start,t.length+this.length()+e.length)},replace:function(t){null!==t&&(this.update(),this.changeSelection(t),this.select(this.start,t.length))},trimSelect:function(){return this.update()," "==this.text().substring(this.length(),this.length()-1)&&this.select(this.start,this.length()-1),this.update()},phrase:function(t,e){this.trimSelect().tag(t,e?e:t)},changeSelection:function(t){var e=this.textarea.scrollTop,i=this.textarea.value;this.textarea.value=i.substring(0,this.start)+t+i.substring(this.end),this.textarea.scrollTop=e},lf:function(){if(this.lineFeedKnown)return this.lineFeedFormat;var t=this.textarea.value.indexOf("\n"),e=this.textarea.value.indexOf("\r"),i=this.textarea.value.indexOf("\r\n"),n=null;return t>=0&&(n="\n"),e>=0&&(n="\r"),i>=0&&(n="\r\n"),n?(this.lineFeedFormat=n,this.lineFeedKnown=!0,n):document.selection?"\r\n":"\n"},update:function(){if(this.textarea.focus(),this.isIe()){for(var t=document.selection.createRange(),e=t.getBookmark(),i=this.textarea.value,n=i,a="[~M~A~R~K~E~R~]";-1!=i.indexOf(a);)a+=Math.random();t.text=a+t.text+a,i=this.textarea.value,this.start=i.indexOf(a),i=i.replace(a,""),this.end=i.indexOf(a),this.textarea.value=n,t.moveToBookmark(e),t.select()}else this.start=this.textarea.selectionStart,this.end=this.textarea.selectionEnd;return this},length:function(){return this.end-this.start},text:function(){return this.textarea.value.substring(this.start,this.end)},isCursor:function(){return this.start==this.end},select:function(t,e){if(this.isIe()){var i=this.textarea.value.substring(0,t).split("\r\n").length-1;t-=i,this.textarea.focus(),this.textarea.select();var n=document.selection.createRange();n.collapse(!0),n.moveStart("character",t),n.moveEnd("character",e),n.select()}else this.textarea.selectionStart=t,this.textarea.selectionEnd=t+e;this.textarea.focus()},selectBlock:function(){this.update();var t=this.lf(),e=this.textarea,i=e.value.substring(0,this.start).lastIndexOf(t);-1!==i&&(i+=t.length);var n=Math.max(0,i),a=e.value.substring(n,this.start).length+this.length(),o=e.value.substring(this.end,e.value.length),s=o.indexOf(t);return a+=-1==s?o.length:s,this.select(n,a),this.update()}},Texy.prototype=jQuery.extend({},Selection.prototype,{bold:function(){this.trimSelect();var t=this.text();t.match(/^\*\*.*\*\*$/)?this.replace(t.substring(2,t.length-2)):this.tag("**","**")},italic:function(){this.trimSelect();var t=this.text();t.match(/^\*\*\*.*\*\*\*$/)||t.match(/^\*[^*]+\*$/)?this.replace(t.substring(1,t.length-1)):this.tag("*","*")},block:function(t){this.tag("/--"+t+this.lf(),this.lf()+"\\--")},link:function(t){t&&this.phrase('"','":'+t)},acronym:function(t){this.update(),t&&(this.text().match(/^[a-zA-ZěščřžýáíéúůĚŠČŘŽÝÁÍÉÚŮ]{2,}$/)?this.tag("","(("+t+"))"):this.phrase('"','"(('+t+"))"))},line:function(){this.update();var t=this.lf(),e=t+t+"-------------------"+t+t;this.isCursor()?this.tag(e,""):this.replace(e)},align:function(t){this.update();var e=this.lf(),i="."+t+e,n=e+e,a=this.textarea.value.substring(0,this.start).lastIndexOf(n),o=a+n.length;this.textarea.value=-1==a?i+this.textarea.value:this.textarea.value.substring(0,o)+i+this.textarea.value.substring(o),this.select(this.start+i.length,this.length())},_toRoman:function(t){t=Math.min(parseInt(t,10),5999);var e,i,n,a=["","M","MM","MMM","MMMM","MMMMM"],o=["","C","CC","CCC","CD","D","DC","DCC","DCCC","CM"],s=["","X","XX","XXX","XL","L","LX","LXX","LXXX","XC"],r=["","I","II","III","IV","V","VI","VII","VIII","IX"],l=function(e){return e=(t-t%e)/e};return e=l(1e3),t%=1e3,i=l(100),t%=100,n=l(10),a[e]+o[i]+s[n]+r[t%10]},_toLetter:function(t){var e=["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"];return e[Math.max(0,Math.min(t,e.length)-1)]},list:function(t){this.selectBlock();for(var e=this.lf(),i=this.text().split(e),n=this.isCursor()?3:i.length,a="",o=1;n>=o;o++){var s={ul:"-",ol:o+")",bq:">",indent:"",romans:this._toRoman(o)+")",smallRomans:this._toRoman(o).toLowerCase()+")",smallAlphabet:this._toLetter(o)+")",bigAlphabet:this._toLetter(o).toUpperCase()+")"};if(a+=s[t]+" "+(this.isCursor()?"":i[o-1])+(o!=n?e:""),this.isCursor()&&1===o)var r=a.length-1}this.isCursor()?this.tag(a.substring(0,r),a.substring(r)):this.replace(a)},indent:function(){this.list("indent")},unindent:function(){this.selectBlock();for(var t=this.text().split(this.lf()),e=[],i=0;i<t.length;i++){var n=t[i].substring(0,1);e.push(" "==n||"	"==n?t[i].substring(1,t[i].length):t[i])}this.replace(e.join(this.lf()))},heading:function(t){function e(t,e){for(var i="",n=0;n<Math.max(3,t);n++)i+=e;return i}this.selectBlock();var i=this.lf();if(this.isCursor()){var n=prompt(this.texyla.lng.texyHeadingText,"");n&&this.tag(n+i+e(n.length,t)+i,"")}else this.tag("",i+e(this.length(),t))},img:function(t,e,i,n){var a="";"<>"==i&&(a+=this.lf()+".<>"+this.lf(),i=!1),a+="[* "+t+" ",a+=e?".("+e+") ":"",a+=(i?i:"*")+"]",a+=n?" *** "+e:"",this.replace(a)},table:function(t,e,i){for(var n=this.lf(),a=n,o=0;e>o;o++){if("n"===i&&2>o){a+="|";for(var s=0;t>s;++s)a+="--------";a+=n}for(s=0;t>s;s++)if(a+="l"===i&&0===s?"|* 	":"| 	",0===o&&0===s)var r=a.length-1;a+="|"+n}a+=n,this.tag(a.substring(0,r),a.substring(r))}}),Texyla.prototype.buttons={h1:function(){this.texy.heading("#")},h2:function(){this.texy.heading("*")},h3:function(){this.texy.heading("=")},h4:function(){this.texy.heading("-")},bold:function(){this.texy.bold()},italic:function(){this.texy.italic()},del:function(){this.texy.phrase("--")},center:function(){this.texy.align("<>")},left:function(){this.texy.align("<")},right:function(){this.texy.align(">")},justify:function(){this.texy.align("=")},ul:function(){this.texy.list("ul")},ol:function(){this.texy.list("ol")},olRomans:function(){this.texy.list("romans")},olRomansSmall:function(){this.texy.list("smallRomans")},olAlphabetSmall:function(){this.texy.list("smallAlphabet")},olAlphabetBig:function(){this.texy.list("bigAlphabet")},blockquote:function(){this.texy.list("bq")},indent:function(){this.texy.indent()},unindent:function(){this.texy.unindent()},sub:function(){this.texy.phrase("__")},sup:function(){this.texy.phrase("^^")},link:function(){this.texy.link(prompt(this.lng.linkUrl,"http://"))},acronym:function(){this.texy.acronym(prompt(this.lng.acronymTitle,""))},hr:function(){this.texy.line()},code:function(){this.texy.block("code")},codeHtml:function(){this.texy.block("html")},codeCss:function(){this.texy.block("css")},codeJs:function(){this.texy.block("js")},codePhp:function(){this.texy.block("php")},codeSql:function(){this.texy.block("sql")},codeInline:function(){this.texy.phrase("`")},html:function(){this.texy.block("html")},notexy:function(){this.texy.phrase("''","''")},web:function(){window.open("http://texyla.janmarek.net/")},syntax:function(){window.open(this.lng.syntaxUrl)},div:function(){this.texy.block("div")},comment:function(){this.texy.block("comment")},text:function(){this.texy.block("text")},preview:function(){this.view("preview")},htmlPreview:function(){this.view("htmlPreview")},edit:function(){this.view("edit")},submit:function(){this.submit()}},Texyla.prototype.wrap=function(){this.container=this.textarea.wrap('<div class="texyla"></div>').parent();var t=this.options.width||this.textarea.get(0).offsetWidth||this.textarea.width();if(this.container.width(t),this.editDiv=this.textarea.wrap('<div class="textarea-container"></div>').parent().wrap('<div class="edit-div"></div>').parent(),this.textarea.get(0).offsetWidth>0){this.textarea.width(t);var e=this.textarea.get(0).offsetWidth-t}else var e=0;this.textarea.width(t-e-2*this.options.padding),this.textareaHeight=this.textarea.get(0).offsetHeight,this.previewDiv=jQuery('<div class="preview-div"></div>').insertAfter(this.editDiv),this.previewDiv.prepend('<div class="view-header" style="background-image: url(\''+this.expand(this.options.iconPath,"preview")+"');\">"+this.lng.btn_preview+"</div>"),this.preview=jQuery('<div class="preview"></div>').appendTo(this.previewDiv).wrap('<div class="preview-wrapper ui-widget-content"></div>'),this.htmlPreviewDiv=jQuery('<div class="html-preview-div"></div>').insertAfter(this.previewDiv),this.htmlPreviewDiv.prepend('<div class="view-header" style="background-image: url(\''+this.expand(this.options.iconPath,"htmlPreview")+"');\">"+this.lng.btn_htmlPreview+"</div>"),this.htmlPreview=jQuery('<pre class="html-preview"></pre>').appendTo(this.htmlPreviewDiv).wrap('<div class="preview-wrapper ui-widget-content"></div>'),this.wait=jQuery('<div class="preview-wait">'+this.lng.wait+"</div>"),this.createToolbar(),this.createBottomToolbar(),this.view(this.options.defaultView,!0)},Texyla.prototype.createToolbar=function(){for(var t,e,i=jQuery('<ul class="toolbar"></ul>').prependTo(this.editDiv),n=0;n<this.options.toolbar.length;n++)if(t=this.options.toolbar[n],"string"==typeof t)jQuery("<span title='"+this.lng["btn_"+t]+"'><img src='"+this.expand(this.options.iconPath,t)+"' width='"+this.options.iconWidth+"' height='"+this.options.iconHeight+"'></span>").click(this.clickButton(t)).appendTo("<li class='btn_"+t+"'></li>").parent().appendTo(i);else if(null===t)i.append("<li class='separator'></li>");else if(jQuery.isArray(t)){e=jQuery("<ul class='ui-widget-content ui-corner-all'></ul>");var a;e.appendTo("<li class='menu'></li>").parent().mouseover(function(){clearTimeout(a),jQuery(this).siblings().find("ul:visible").fadeOut("fast"),jQuery(this).find("ul").show()}).mouseout(function(){var t=this;a=setTimeout(function(){jQuery(t).find("ul").fadeOut("fast")},300)}).appendTo(i);for(var o=0;o<t.length;o++)jQuery("<li class='btn_"+t[o]+" ui-corner-all'><span style='background-image: url(\""+this.expand(this.options.iconPath,t[o])+"\");'>"+this.lng["btn_"+t[o]]+"</span></li>").hover(function(){jQuery(this).addClass("ui-state-hover")},function(){jQuery(this).removeClass("ui-state-hover")}).click(this.clickButton(t[o])).appendTo(e)}else if("object"==typeof t&&"label"==t.type){var s=t.translatedText?this.lng[t.translatedText]:t.text;i.append("<li class='label ui-state-disabled'>"+s+"</li>")}},Texyla.prototype.clickButton=function(t){var e=this;return t in this.buttons?function(i){e.buttons[t].call(e,i)}:function(){e.error('Function "'+t+'" is not supported!')}},Texyla.prototype.createBottomToolbar=function(){function t(t,e,i,n){var o=a.expand(a.options.iconPath,t);return"span"==a.options.buttonType||n?jQuery("<span class='btn btn_"+t+" ui-state-default "+(n?"ui-corner-bottom":"ui-corner-all")+"'><span class='btn-left'></span><span class='btn-middle'><span style='background-image: url(\""+o+"\");' class='icon-span'>"+e+"</span></span><span class='btn-right'></span></span>").click(i).hover(function(){jQuery(this).addClass("ui-state-hover")},function(){jQuery(this).removeClass("ui-state-hover")}):jQuery("<button type='button' class='btn_"+t+"'><img src='"+o+"' width='"+a.options.iconWidth+"' height='"+a.options.iconHeight+"'> "+e+"</button>").click(i)}function e(e,i,n){for(var o=0;o<i.length;o++)t(i[o],a.lng["btn_"+i[o]],a.clickButton(i[o]),n).appendTo(e)}var i=jQuery("<div class='bottom-toolbar'></div>").appendTo(this.container);this.leftToolbar=jQuery("<div class='left-toolbar'></div>").appendTo(i);var n=jQuery('<div class="right-toolbar"></div>').appendTo(i);this.rightEditToolbar=jQuery("<div class='right-edit-toolbar'></div>").appendTo(n),this.rightPreviewToolbar=jQuery("<div class='right-preview-toolbar'></div>").appendTo(n),this.options.tabs?this.leftToolbar.addClass("tabs"):"span"==this.options.buttonType&&this.leftToolbar.addClass("span-tb"),"span"==this.options.buttonType&&n.addClass("span-tb");var a=this;e(this.leftToolbar,this.options.bottomLeftToolbar,this.options.tabs),e(this.rightEditToolbar,this.options.bottomRightEditToolbar),e(this.rightPreviewToolbar,this.options.bottomRightPreviewToolbar)},Texyla.prototype.view=function(t,e){function i(t){u.preview.html(t).show(),u.htmlPreview.text(t.replace(new RegExp("\n","g"),u.texy.lf())).show(),"undefined"!=typeof jush&&u.htmlPreview.html(jush.highlight("htm",t)),u.wait.hide()}var n=this.textarea.val();if("edit"!=t&&""==n)return e?void this.view("edit"):(alert(this.lng.viewEmpty),void this.textarea.focus());switch(t){case"preview":this.previewDiv.show(),this.htmlPreviewDiv.hide(),this.editDiv.hide(),this.rightPreviewToolbar.show(),this.rightEditToolbar.hide();break;case"htmlPreview":this.previewDiv.hide(),this.htmlPreviewDiv.show(),this.editDiv.hide(),this.rightPreviewToolbar.show(),this.rightEditToolbar.hide();break;case"edit":this.previewDiv.hide(),this.htmlPreviewDiv.hide(),this.editDiv.show(),this.rightPreviewToolbar.hide(),this.rightEditToolbar.show()}if("edit"!=t){var a=this.textarea.get(0).offsetHeight||this.textareaHeight;if(a){var o=this["preview"==t?"preview":"htmlPreview"].parent();o.height(a);var s=o.get(0).offsetHeight-a;this.container.find("div.preview-wrapper").height(a-s)}else this.container.find("div.preview-wrapper").height("auto")}if(this.options.tabs){var r=this.leftToolbar;r.find(".ui-state-active").removeClass("ui-state-active"),r.find(".btn_"+t).addClass("ui-state-active")}else for(var l=["preview","htmlPreview","edit"],h=0;h<l.length;h++)l[h]==t?this.container.find(".btn_"+t).hide():this.container.find(".btn_"+l[h]).show();if("edit"!=t&&this.lastPreviewedTexy!=n){var u=this;this.lastPreviewedTexy=n;var c=this["preview"==t?"preview":"htmlPreview"].parent();c.prepend(this.wait),this.wait.show().css({marginTop:(c.get(0).offsetHeight-this.wait.get(0).offsetHeight)/2,marginLeft:(c.get(0).offsetWidth-this.wait.get(0).offsetWidth)/2}),this.preview.hide(),this.htmlPreview.hide(),jQuery.post(this.options.previewPath,{texy:n,cfg:this.options.texyCfg},i,"html")}},jQuery.fn.extend({ajaxUpload:function(callback){if(this.is("form")){arguments.callee.count||(arguments.callee.count=0);var target="ajaxUploadFrame"+ ++arguments.callee.count,iframe=jQuery('<iframe src="" width="1" height="1" frameborder="0" name="'+target+'"></iframe>');iframe.css({visibility:"hidden",position:"absolute",left:"-1000px",top:"-1000px"}),iframe.appendTo("body"),iframe.load(function(){jQuery.event.trigger("ajaxComplete");var iframeEl=iframe.get(0),body;body=iframeEl.contentDocument?iframeEl.contentDocument.body:iframeEl.contentWindow.document.body;var content=jQuery(body).text();content?(eval("var data = "+content+";"),callback(data)):callback(),setTimeout(function(){iframe.remove()},1e3)}),this.attr({target:target,method:"post",enctype:"multipart/form-data"}).submit(),jQuery.event.trigger("ajaxStart")}}}),jQuery.texyla.initPlugin(function(){this.openedWindows={}}),jQuery.texyla.addWindow=function(t,e){if(Texyla.prototype.windowConfigs[t]=e,e.dimensions){var i={};i[t+"WindowDimensions"]=e.dimensions,jQuery.texyla.setDefaults(i)}jQuery.texyla.addButton(t,function(){this.openWindow(t)})},jQuery.texyla.extend({windowConfigs:{},openWindow:function(t){if("function"!=typeof jQuery.fn.dialog)return this.error("jQuery UI plugin Dialog is not loaded."),!1;if(!Texyla.prototype.windowConfigs[t])return this.error("Window "+t+" is not defined."),!1;if(this.isWindowOpened(t))return this.getWindow(t).dialog("moveToTop");var e=Texyla.prototype.windowConfigs[t],i=e.createContent.call(this);this.openedWindows[t]=i;var n=e.options||{};n.title=e.title?e.title:this.lng["win_"+t];var a=this.options[t+"WindowDimensions"];a&&(n.width=a[0],n.height=a[1]);var o=this;return e.action&&(n.buttons={},n.buttons[this.lng.windowOk]=function(){e.action.call(o,i),e.stayOpened||o.closeWindow(t)},n.buttons[this.lng.windowCancel]=function(){o.closeWindow(t)}),n.close=function(){o.closeWindow(t)},i.dialog(n),i.find("input:first").focus(),i},closeWindow:function(t){this.openedWindows[t].dialog("destroy").remove(),this.openedWindows[t]=null},isWindowOpened:function(t){return this.openedWindows[t]?!0:!1},getWindowAction:function(t){return Texyla.prototype.windowConfigs[t].action},getWindow:function(t){return this.openedWindows[t]?this.openedWindows[t]:null}}),jQuery.texyla.addStrings("cs",{btn_h1:"Největší nadpis",btn_h2:"Velký nadpis",btn_h3:"Střední nadpis",btn_h4:"Nejmenší nadpis",btn_bold:"Tučně",btn_italic:"Kurzíva",btn_del:"Přeškrtnuto",btn_center:"Zarovnání na střed",btn_left:"Zarovnání vlevo",btn_right:"Zarovnání vpravo",btn_justify:"Zarovnání do bloku",btn_ul:"Seznam",btn_ol:"Číslovaný seznam",btn_olRomans:"Římské číslování",btn_olRomansSmall:"Malé římské číslování",btn_olAlphabetSmall:"Malá abeceda",btn_olAlphabetBig:"Velká abeceda",btn_blockquote:"Bloková citace",btn_sub:"Dolní index",btn_sup:"Horní index",btn_link:"Odkaz",btn_acronym:"Vysvětlení zkratky",btn_hr:"Čára",btn_code:"Kód",btn_codeHtml:"Kód html",btn_codeCss:"Kód CSS",btn_codeJs:"Kód javascript",btn_codePhp:"Kód php",btn_codeSql:"Kód SQL",btn_comment:"Komentář",btn_div:"Blok div",btn_text:"Text",btn_codeInline:"Inline kód",btn_html:"HTML",btn_notexy:"Inline text",btn_edit:"Upravit",btn_preview:"Náhled",btn_htmlPreview:"HTML",btn_syntax:"Texy nápověda",btn_submit:"Odeslat",btn_web:"Web editoru Texyla",texyHeadingText:"Text nadpisu",acronymTitle:"Titulek",linkUrl:"Adresa odkazu",wait:"Prosím čekejte",viewEmpty:"Textové pole je prázdné!",windowOk:"OK",windowClose:"Zavřít",windowCancel:"Storno",windowCloseAfterInsert:"Zavřít po vložení",syntaxUrl:"http://texy.info/cs/syntax",btn_color:"Barvy",win_color:"Vyberte barvu",colorSelectModeHeading:"Obarvit:",colorSelectModeText:"text",colorSelectModeBackground:"pozadí",btn_emoticon:"Smajlík",win_emoticon:"Vložit smajlík",btn_files:"Soubory",win_files:"Soubory",filesUpload:"Nahrát soubor",win_upload:"Nahrát soubor",filesFilter:"Filtr",filesMkDir:"Vytvořit adresář",filesRename:"Přejmenovat",filesDelete:"Smazat",filesReallyDelete:"Opravdu smazat",filesDirectoryName:"Název složky",btn_img:"Obrázek",win_img:"Vložit obrázek",imgSrc:"Adresa obrázku",imgAlt:"Popis",imgAlign:"Zarovnání",imgAlignNone:"žádné",imgAlignLeft:"vlevo",imgAlignRight:"vpravo",imgAlignCenter:"na střed",imgDescription:"Zobrazit jako popisek",win_link:"Vložit odkaz",linkText:"Text odkazu",btn_symbol:"Symbol",win_symbol:"Vložit symbol",btn_table:"Tabulka",win_table:"Vložit tabulku",tableCols:"Počet sloupců",tableRows:"Počet řádek",tableTh:"Hlavička",tableThNone:"žádná",tableThTop:"nahoře",tableThLeft:"vlevo",btn_textTransform:"Transformovat text",win_textTransform:"Vyberte transformaci",textTransformLower:"malá písmena",textTransformUpper:"VELKÁ PÍSMENA",textTransformCapitalize:"První Velká",textTransformFirstUpper:"První velké",textTransformUrl:"tvar-webove-adresy",btn_youtube:"YouTube",win_youtube:"YouTube",youtubeUrl:"Vložte adresu videa nebo jeho ID",youtubePreview:"Náhled videa",btn_gravatar:"Gravatar",win_gravatar:"Gravatar",gravatarUrl:"Vložte email",gravatarPreview:"Náhled"}),jQuery.texyla.initPlugin(function(){var t=this;this.textarea.bind(jQuery.browser.opera?"keypress":"keydown",function(e){t.keys(e)})}),jQuery.texyla.extend({keys:function(t){var e=t.charCode||t.keyCode||-1,i=!1;t.ctrlKey&&66==e&&!t.altKey&&(this.texy.bold(),i=!0),t.ctrlKey&&73==e&&(this.texy.italic(),i=!0),9==e&&t.shiftKey&&(this.texy.unindent(),i=!0),9!=e||t.shiftKey||(-1==this.texy.update().text().indexOf(this.texy.lf())?this.texy.tag("	",""):this.texy.indent(),i=!0),t.ctrlKey&&83==e&&(this.submit(),i=!0),i&&(t.preventDefault&&t.stopPropagation?(t.preventDefault(),t.stopPropagation()):(window.event.cancelBubble=!0,window.event.returnValue=!1))}}),jQuery.texyla.initPlugin(function(){if("function"==typeof this.textarea.resizable){var t=this;this.textarea.resizable({handles:"s",minHeight:80,stop:function(){t.textareaHeight=t.textarea.get(0).offsetHeight}}),this.textarea.parent().css("padding-bottom",0)}}),jQuery.texyla.addWindow("img",{createContent:function(){return jQuery("<div><table><tbody><tr><th><label>"+this.lng.imgSrc+'</label></th><td><input type="text" class="src"></td></tr><tr><th><label>'+this.lng.imgAlt+'</label></th><td><input type="text" class="alt"></td></tr><tr><td></td><td><label><input type="checkbox" class="descr">'+this.lng.imgDescription+"</label></td></tr><tr><th><label>"+this.lng.imgAlign+'</label></th><td><select class="align"><option value="*">'+this.lng.imgAlignNone+'</option><option value="<">'+this.lng.imgAlignLeft+'</option><option value=">">'+this.lng.imgAlignRight+'</option><option value="<>">'+this.lng.imgAlignCenter+"</option></select></td></tr></tbody></table></div>")},action:function(t){this.texy.img(t.find(".src").val(),t.find(".alt").val(),t.find(".align").val(),t.find(".descr").get(0).checked)},dimensions:[350,250]}),jQuery.texyla.addWindow("table",{dimensions:[320,200],action:function(t){this.texy.table(t.find(".cols").val(),t.find(".rows").val(),t.find(".header").val())},createContent:function(){var t,e,i=this,n=jQuery("<div style='position:relative'><table class=\"table\"><tbody><tr><th><label>"+this.lng.tableCols+'</label></th><td><input type="number" class="cols" size="3" maxlength="2" min="1" value="2"></td></tr><tr><th><label>'+this.lng.tableRows+'</label></th><td><input type="number" class="rows" size="3" maxlength="2" min="1" value="2"></td></tr><tr><th><label>'+this.lng.tableTh+'</label></th><td><select class="header"><option>'+this.lng.tableThNone+'</option><option value="n">'+this.lng.tableThTop+'</option><option value="l">'+this.lng.tableThLeft+'</option></select></td></tr></tbody></table><div class="tab-background"><div class="tab-selection"></div><div class="tab-control"></div></div></div>'),a=!0;return n.find(".tab-control").click(function(){a=!a}).mousemove(function(i){if(a){t=i.pageX;for(var o=this;o.offsetParent;)t-=o.offsetLeft,o=o.offsetParent;for(e=i.pageY,o=this;o.offsetParent;)e-=o.offsetTop,o=o.offsetParent;var s=Math.ceil(t/8),r=Math.ceil(e/8);n.find(".tab-selection").css({width:8*s,height:8*r}),n.find(".cols").val(s),n.find(".rows").val(r)}}).dblclick(function(){i.getWindowAction("table").call(i,n),n.dialog("close")}),n.find(".cols, .rows").bind("change click blur",function(){var t=Math.min(n.find(".cols").val(),10),e=Math.min(n.find(".rows").val(),10);n.find(".tab-selection").css({width:8*t,height:8*e})}),n}}),jQuery.texyla.addWindow("link",{dimensions:[330,180],createContent:function(){return jQuery("<div><table><tbody><tr><th><label>"+this.lng.linkText+'</label></th><td><input type="text" class="link-text" value="'+this.texy.trimSelect().text()+'"></td></tr><tr><th><label>'+this.lng.linkUrl+'</label></th><td><input type="text" class="link-url" value="http://"></td></tr></tbody></table></div>')},action:function(t){var e=t.find(".link-text").val();e=""==e?"":'"'+e+'":',this.texy.replace(e+t.find(".link-url").val())}}),$.texyla.setDefaults({emoticonPath:"%texyla_base%/emoticons/texy/%var%.gif",emoticons:{":-)":"smile",":-(":"sad",";-)":"wink",":-D":"biggrin","8-O":"eek","8-)":"cool",":-?":"confused",":-x":"mad",":-P":"razz",":-|":"neutral"}}),$.texyla.initPlugin(function(){this.options.emoticonPath=this.expand(this.options.emoticonPath)}),$.texyla.addWindow("emoticon",{createContent:function(){function t(t){return function(){e.texy.replace(t),i.find("input.close-after-insert").get(0).checked&&i.dialog("close")}}var e=this,i=$("<div></div>"),n=$('<div class="emoticons"></div>').appendTo(i);for(var a in this.options.emoticons)$("<img src='"+this.options.emoticonPath.replace("%var%",this.options.emoticons[a])+"' title='"+a+"' alt='"+a+"' class='ui-state-default'>").hover(function(){$(this).addClass("ui-state-hover")},function(){$(this).removeClass("ui-state-hover")}).click(t(a)).appendTo(n);return i.append("<br><label><input type='checkbox' checked class='close-after-insert'> "+this.lng.windowCloseAfterInsert+"</label>"),i},dimensions:[192,170]}),jQuery.texyla.setDefaults({symbols:["&","@",["<","&lt;"],[">","&gt;"],"[","]","{","}","\\","α","β","π","µ","Ω","∑","°","∞","≠","±","×","÷","≥","≤","®","™","€","£","$","~","^","·","•"]}),jQuery.texyla.addWindow("symbol",{dimensions:[300,230],createContent:function(){function t(t){return function(){e.texy.replace(t),i.find("input.close-after-insert").get(0).checked&&i.dialog("close")}}for(var e=this,i=jQuery("<div></div>"),n=jQuery('<div class="symbols"></div>').appendTo(i),a=this.options.symbols,o=0;o<a.length;o++)jQuery("<span class='ui-state-default'></span>").hover(function(){jQuery(this).addClass("ui-state-hover")},function(){jQuery(this).removeClass("ui-state-hover")}).text(a[o]instanceof Array?a[o][0]:a[o]).click(t(a[o]instanceof Array?a[o][1]:a[o])).appendTo(n);return i.append("<br><label><input type='checkbox' checked class='close-after-insert'> "+this.lng.windowCloseAfterInsert+"</label>"),i}}),jQuery.texyla.setDefaults({filesPath:null,filesThumbPath:"%var%",filesIconPath:"%texyla_base%/plugins/files/icons/%var%.png",filesUploadPath:null,filesMkDirPath:null,filesRenamePath:null,filesDeletePath:null,filesAllowUpload:!0,filesAllowMkDir:!1,filesAllowDelete:!0,filesAllowDeleteDir:!1,filesAllowRename:!0,filesAllowRenameDir:!1,filesAllowFilter:!0}),jQuery.texyla.initPlugin(function(){this.options.filesPath=this.expand(this.options.filesPath),this.options.filesThumbPath&&(this.options.filesThumbPath=this.expand(this.options.filesThumbPath)),this.options.filesUploadPath&&(this.options.filesUploadPath=this.expand(this.options.filesUploadPath)),this.options.filesMkDirPath&&(this.options.filesMkDirPath=this.expand(this.options.filesMkDirPath)),this.options.filesRenamePath&&(this.options.filesRenamePath=this.expand(this.options.filesRenamePath)),this.options.filesDeletePath&&(this.options.filesDeletePath=this.expand(this.options.filesDeletePath))}),jQuery.texyla.addWindow("files",{dimensions:[400,350],createContent:function(){function t(o){i=o,n.find("p.wait").show(),n.find("div.toolbar, div.files-filter, div.files-gallery").hide(),jQuery.ajax({type:"GET",dataType:"json",cache:!1,url:e.options.filesPath,data:{folder:i},success:function(o){if(o.error)return void e.error(o.error);n.find("p.wait").hide(),n.find("div.toolbar, div.files-filter, div.files-gallery").show(),a.empty();for(var s=o.list,r=0;r<s.length;r++){var l=s[r].type,h=jQuery('<table class="gallery-item ui-widget-content ui-corner-all"><tr><td class="image"></td><td class="label"></td></tr></table>').appendTo(a);h.find(".image").append("image"===l?'<image src="'+e.expand(e.options.filesThumbPath,s[r].thumbnailKey)+'">':'<img src="'+e.expand(e.options.filesIconPath,s[r].type)+'" width="16" height="16" alt="">'),h.find(".label").append('<span class="name"><a href="">'+s[r].name+"</a></span>"),s[r].description&&h.find(".label").append('<br><small class="description">'+s[r].description+"</small>");var u;switch(l){case"up":case"folder":u=function(e){return function(){return t(e.key),!1}}(s[r]);break;case"image":u=function(t){return function(){var i=e.openWindow("img");return i.find(".src").val(t.insertUrl),i.find(".alt").val(t.description).select(),n.dialog("close"),!1}}(s[r]);break;case"file":u=function(t){return function(){var i=e.openWindow("link");return i.find(".link-url").val(t.insertUrl),i.find(".link-text").val(t.description).select(),n.dialog("close"),!1}}(s[r])}if(h.find(".image img").click(u),h.find(".label span.name a").click(u),"up"!==l){var c=jQuery('<td class="buttons"></td>').appendTo(h.find("tr"));(e.options.filesAllowRename&&("file"===l||"image"==l)||e.options.filesAllowRenameDir&&"folder"===l)&&jQuery('<a href="" class="rename">'+e.lng.filesRename+"</a>").button({icons:{primary:"ui-icon-pencil"},text:!1}).click(function(n){return function(){var a=prompt(e.lng.filesRename,n.name);return a?(jQuery.getJSON(e.options.filesRenamePath,{folder:i,oldname:n.name,newname:a},function(n){return n.error?void e.error(n.error):void t(i)}),!1):!1}}(s[r])).appendTo(c),(e.options.filesAllowDelete&&("file"===l||"image"==l)||e.options.filesAllowDeleteDir&&"folder"===l)&&jQuery('<a href="" class="delete">'+e.lng.filesDelete+"</a>").button({icons:{primary:"ui-icon-closethick"},text:!1}).click(function(n){return function(){return confirm(e.lng.filesReallyDelete+" '"+n.name+"'?")?(jQuery.getJSON(e.options.filesDeletePath,{folder:i,name:n.name},function(n){return n.error?void e.error(n.error):void t(i)}),!1):!1}}(s[r])).appendTo(c)}}}})}var e=this,i="",n=jQuery('<div><div class="toolbar"></div><div class="files-gallery"></div><p class="wait">'+this.lng.wait+"</p></div>");if(this.options.filesAllowUpload&&jQuery('<a href="" class="upload">'+this.lng.filesUpload+"</a>").button({icons:{primary:"ui-icon-arrowthick-1-n"}}).click(function(){var t=e.openWindow("upload");return t.find("form input.folder").val(i),n.dialog("close"),!1}).appendTo(n.find("div.toolbar")),this.options.filesAllowMkDir&&jQuery('<a href="" class="mkdir">'+this.lng.filesMkDir+"</a>").button({icons:{primary:"ui-icon-folder-collapsed"}}).click(function(){var n=prompt(e.lng.filesDirectoryName,"");return n?(jQuery.getJSON(e.options.filesMkDirPath,{folder:i,name:n},function(n){return n.error?void e.error(n.error):void t(i)}),!1):!1}).appendTo(n.find("div.toolbar")),this.options.filesAllowFilter){jQuery('<div class="files-filter">'+this.lng.filesFilter+': <input type="text" class="ui-widget-content"></div>').insertAfter(n.find(".toolbar"));var a=n.find("div.files-gallery");n.find("div.files-filter input").keyup(function(){var t=this.value;a.find(".gallery-item").each(function(){var e=$(this);return""===t?void e.show():void(-1!==e.find("span.name").text().indexOf(t)?e.show():e.hide())})})}return t(""),n}}),jQuery.texyla.addWindow("upload",{dimensions:[330,160],createContent:function(){return jQuery('<div><form action="'+this.options.filesUploadPath+'" class="upload" method="post" enctype="multipart/form-data"><div><input type="hidden" name="folder" class="folder" value=""><input type="file" name="file" class="file"> </div></form><p class="wait" style="display:none">'+this.lng.wait+"</p></div>")
},action:function(t){var e=t.find("form");if(e.find(".file").val()){t.ajaxStart(function(){e.hide(),t.find("p.wait").show()}).ajaxComplete(function(){t.dialog("close")});var i=this;e.ajaxUpload(function(t){if(t.error)i.error(t.error);else if("image"==t.type){var e=i.openWindow("img");e.find(".src").val(t.filename),e.find(".alt").focus()}else{var n=i.openWindow("link");n.find(".link-url").val(t.filename),n.find(".link-text").focus()}})}}}),jQuery.texyla.setDefaults({colors:["red","blue","aqua","black","fuchsia","gray","green","lime","maroon","navy","olive","orange","purple","silver","teal","white","yellow","#AABBCC"]}),jQuery.texyla.addWindow("color",{createContent:function(){function t(t){return function(){e.texy.update(),e.texy.isCursor()?e.texy.selectBlock().phrase(""," .{color: "+t+"}"):e.texy.phrase('"'," .{color: "+t+'}"'),i.find("input.close-after-insert").get(0).checked&&i.dialog("close")}}for(var e=this,i=jQuery("<div></div>"),n=jQuery('<div class="colors"></div>').appendTo(i),a=0;a<e.options.colors.length;a++){var o=e.options.colors[a];jQuery('<span class="ui-state-default ui-corner-all" title="'+o+'"><span style="background-color:'+o+'">&nbsp;</span></span>').hover(function(){jQuery(this).addClass("ui-state-hover")},function(){jQuery(this).removeClass("ui-state-hover")}).click(t(o)).appendTo(n)}return i.append("<br><label><input type='checkbox' checked class='close-after-insert'> "+this.lng.windowCloseAfterInsert+"</label>"),i},dimensions:[200,150]}),jQuery.texyla.addWindow("textTransform",{createContent:function(){return jQuery("<div><form><label><input type='radio' name='changeCase' value='lower'> "+this.lng.textTransformLower+"</label><br><label><input type='radio' name='changeCase' value='upper'> "+this.lng.textTransformUpper+"</label><br><label><input type='radio' name='changeCase' value='firstUpper'> "+this.lng.textTransformFirstUpper+"</label><br><label><input type='radio' name='changeCase' value='cap'> "+this.lng.textTransformCapitalize+"</label><br><label><input type='radio' name='changeCase' value='url'> "+this.lng.textTransformUrl+"</label></form></div>")},action:function(t){var e=this.texy.update().text(),i=null,n=t.find("form input:checked").val();switch(n){case"lower":i=e.toLowerCase();break;case"upper":i=e.toUpperCase();break;case"cap":i=e.replace(/\S+/g,function(t){return t.charAt(0).toUpperCase()+t.substr(1,t.length).toLowerCase()});break;case"firstUpper":i=e.charAt(0).toUpperCase()+e.substr(1,e.length).toLowerCase();break;case"url":for(var a={"á":"a","č":"c","ď":"d","é":"e","ě":"e","í":"i","ň":"n","ó":"o","ř":"r","š":"s","ť":"t","ú":"u","ů":"u","ý":"y","ž":"z"},o=e.toLowerCase(),s="",r=0;r<o.length;r++)s+="undefined"!=typeof a[o.charAt(r)]?a[o.charAt(r)]:o.charAt(r);i=s.replace(/[^a-z0-9_]+/g,"-").replace(/^-|-$/g,"")}null!==i&&this.texy.replace(i)},dimensions:[220,210]}),jQuery.texyla.setDefaults({youtubeMakro:"[* youtube:%var% *]"}),jQuery.texyla.addWindow("youtube",{createContent:function(){var t=jQuery("<div><form><div><label>"+this.lng.youtubeUrl+'<br><input type="text" size="35" class="key"></label><br><br>'+this.lng.youtubePreview+'</div><div class="thumb"></div></form></div>');return t.find(".key").bind("keyup change",function(){var e=this.value,i="";if("http://"==e.substr(0,7)){var n=e.match("[?&]v=([a-zA-Z0-9_-]+)");n&&(i=n[1])}else i=e;jQuery(this).data("key",i),t.find(".thumb").html('<img src="http://img.youtube.com/vi/'+i+'/1.jpg" width="120" height="90">')}),t},action:function(t){var e=this.expand(this.options.youtubeMakro,t.find(".key").data("key"));this.texy.update().replace(e)},dimensions:[320,300]}),jQuery.texyla.addStrings("cs",{}),jQuery.texyla.setDefaults({gravatarMakro:"[* gravatar:%var% *]"}),jQuery.texyla.addWindow("gravatar",{createContent:function(){var t=jQuery("<div><form><div><label>"+this.lng.gravatarUrl+'<br><input type="text" size="20" class="key"></label><br><br>'+this.lng.gravatarPreview+'</div><div class="thumb"></div></form></div>');return t.find(".key").bind("keyup change",function(){var e=this.value;/^[^@\s]+@[^@\s]+\.[a-z]{2,10}$/i.test(e)&&(jQuery(this).data("key",e),t.find(".thumb").html('<img src="http://www.gravatar.com/avatar/'+faultylabs.MD5(e.trim().toLowerCase()).toLowerCase()+'?d=mm&s=32" width="32" height="32">'))}),t},action:function(t){var e=this.expand(this.options.gravatarMakro,t.find(".key").data("key"));this.texy.update().replace(e)},dimensions:[320,"auto"]}),jQuery.texyla.addStrings("cs",{}),"undefined"==typeof faultylabs&&(faultylabs={}),faultylabs.MD5=function(t){function e(t){var e=(t>>>0).toString(16);return"00000000".substr(0,8-e.length)+e}function i(t){for(var e=[],i=0;i<t.length;i++)e=e.concat(u(t[i]));return e}function n(t){for(var e=[],i=0;8>i;i++)e.push(255&t),t>>>=8;return e}function a(t,e){return t<<e&4294967295|t>>>32-e}function o(t,e,i){return t&e|~t&i}function s(t,e,i){return i&t|~i&e}function r(t,e,i){return t^e^i}function l(t,e,i){return e^(t|~i)}function h(t,e){return t[e+3]<<24|t[e+2]<<16|t[e+1]<<8|t[e]}function u(t){for(var e=[],i=0;i<t.length;i++)if(t.charCodeAt(i)<=127)e.push(t.charCodeAt(i));else for(var n=encodeURIComponent(t.charAt(i)).substr(1).split("%"),a=0;a<n.length;a++)e.push(parseInt(n[a],16));return e}function c(){for(var t="",i=0,n=0,a=3;a>=0;a--)n=arguments[a],i=255&n,n>>>=8,i<<=8,i|=255&n,n>>>=8,i<<=8,i|=255&n,n>>>=8,i<<=8,i|=n,t+=e(i);return t}function d(t){for(var e=new Array(t.length),i=0;i<t.length;i++)e[i]=t[i];return e}function p(t,e){return 4294967295&t+e}function f(){function t(t,e,i,n){var o=w;w=x,x=m,m=p(m,a(p(g,p(t,p(e,i))),n)),g=o}var e=v.length;v.push(128);var i=v.length%64;if(i>56){for(var u=0;64-i>u;u++)v.push(0);i=v.length%64}for(u=0;56-i>u;u++)v.push(0);v=v.concat(n(8*e));var d=1732584193,f=4023233417,y=2562383102,b=271733878,g=0,m=0,x=0,w=0;for(u=0;u<v.length/64;u++){g=d,m=f,x=y,w=b;var k=64*u;t(o(m,x,w),3614090360,h(v,k),7),t(o(m,x,w),3905402710,h(v,k+4),12),t(o(m,x,w),606105819,h(v,k+8),17),t(o(m,x,w),3250441966,h(v,k+12),22),t(o(m,x,w),4118548399,h(v,k+16),7),t(o(m,x,w),1200080426,h(v,k+20),12),t(o(m,x,w),2821735955,h(v,k+24),17),t(o(m,x,w),4249261313,h(v,k+28),22),t(o(m,x,w),1770035416,h(v,k+32),7),t(o(m,x,w),2336552879,h(v,k+36),12),t(o(m,x,w),4294925233,h(v,k+40),17),t(o(m,x,w),2304563134,h(v,k+44),22),t(o(m,x,w),1804603682,h(v,k+48),7),t(o(m,x,w),4254626195,h(v,k+52),12),t(o(m,x,w),2792965006,h(v,k+56),17),t(o(m,x,w),1236535329,h(v,k+60),22),t(s(m,x,w),4129170786,h(v,k+4),5),t(s(m,x,w),3225465664,h(v,k+24),9),t(s(m,x,w),643717713,h(v,k+44),14),t(s(m,x,w),3921069994,h(v,k),20),t(s(m,x,w),3593408605,h(v,k+20),5),t(s(m,x,w),38016083,h(v,k+40),9),t(s(m,x,w),3634488961,h(v,k+60),14),t(s(m,x,w),3889429448,h(v,k+16),20),t(s(m,x,w),568446438,h(v,k+36),5),t(s(m,x,w),3275163606,h(v,k+56),9),t(s(m,x,w),4107603335,h(v,k+12),14),t(s(m,x,w),1163531501,h(v,k+32),20),t(s(m,x,w),2850285829,h(v,k+52),5),t(s(m,x,w),4243563512,h(v,k+8),9),t(s(m,x,w),1735328473,h(v,k+28),14),t(s(m,x,w),2368359562,h(v,k+48),20),t(r(m,x,w),4294588738,h(v,k+20),4),t(r(m,x,w),2272392833,h(v,k+32),11),t(r(m,x,w),1839030562,h(v,k+44),16),t(r(m,x,w),4259657740,h(v,k+56),23),t(r(m,x,w),2763975236,h(v,k+4),4),t(r(m,x,w),1272893353,h(v,k+16),11),t(r(m,x,w),4139469664,h(v,k+28),16),t(r(m,x,w),3200236656,h(v,k+40),23),t(r(m,x,w),681279174,h(v,k+52),4),t(r(m,x,w),3936430074,h(v,k),11),t(r(m,x,w),3572445317,h(v,k+12),16),t(r(m,x,w),76029189,h(v,k+24),23),t(r(m,x,w),3654602809,h(v,k+36),4),t(r(m,x,w),3873151461,h(v,k+48),11),t(r(m,x,w),530742520,h(v,k+60),16),t(r(m,x,w),3299628645,h(v,k+8),23),t(l(m,x,w),4096336452,h(v,k),6),t(l(m,x,w),1126891415,h(v,k+28),10),t(l(m,x,w),2878612391,h(v,k+56),15),t(l(m,x,w),4237533241,h(v,k+20),21),t(l(m,x,w),1700485571,h(v,k+48),6),t(l(m,x,w),2399980690,h(v,k+12),10),t(l(m,x,w),4293915773,h(v,k+40),15),t(l(m,x,w),2240044497,h(v,k+4),21),t(l(m,x,w),1873313359,h(v,k+32),6),t(l(m,x,w),4264355552,h(v,k+60),10),t(l(m,x,w),2734768916,h(v,k+24),15),t(l(m,x,w),1309151649,h(v,k+52),21),t(l(m,x,w),4149444226,h(v,k+16),6),t(l(m,x,w),3174756917,h(v,k+44),10),t(l(m,x,w),718787259,h(v,k+8),15),t(l(m,x,w),3951481745,h(v,k+36),21),d=p(d,g),f=p(f,m),y=p(y,x),b=p(b,w)}return c(b,y,f,d).toUpperCase()}var v=null,y=null;return"string"==typeof t?v=u(t):t.constructor==Array?0===t.length?v=t:"string"==typeof t[0]?v=i(t):"number"==typeof t[0]?v=t:y=typeof t[0]:"undefined"!=typeof ArrayBuffer?t instanceof ArrayBuffer?v=d(new Uint8Array(t)):t instanceof Uint8Array||t instanceof Int8Array?v=d(t):t instanceof Uint32Array||t instanceof Int32Array||t instanceof Uint16Array||t instanceof Int16Array||t instanceof Float32Array||t instanceof Float64Array?v=d(new Uint8Array(t.buffer)):y=typeof t:y=typeof t,y&&alert("MD5 type mismatch, cannot process "+y),f()};